.s-data-table {
  border-radius: 0;

  // header align에 따른 정렬 스타일
  .header-cell {
    width: 100%;
    height: 100%;
    gap: 0; // 아이콘과 텍스트 사이 간격은 margin으로 처리

    &.justify-start {
      justify-content: flex-start !important;
    }

    &.justify-center {
      justify-content: center !important;
    }

    &.justify-end {
      justify-content: flex-end !important;
    }

    // 헤더 텍스트 말줄임 처리
    > span {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      flex: 1;
      min-width: 0;
    }
  }

  :deep(th.v-data-table__th) {
    --v-table-header-height: 36px;
    font-weight: 600;
    font-size: toRem(14);
    background: #F7F9FA;
    position: relative;
    border-right: 1px solid #e0e0e0 !important; // 헤더 세로선 강제 적용

    &:last-child {
      border-right: none !important; // 마지막 헤더는 세로선 제거
    }

    .v-selection-control.v-checkbox-btn .v-icon--size-default {
      font-size: 1.3rem;
    }

    // 커스텀 정렬 아이콘 스타일
    .custom-sort-icon {
      position: relative;
      font-size: 16px;
      opacity: 0;
      cursor: pointer;
      flex-shrink: 0; // 아이콘이 축소되지 않도록
      margin-left: 4px; // 좌측/중앙 정렬 시 텍스트와 간격
      margin-right: 4px; // 우측 정렬 시 텍스트와 간격
    }

    .custom-sort-icon.active {
      opacity: 1;
      color: #666;
    }

    // hover 상태일 때 아이콘 표시
    th:hover .custom-sort-icon {
      opacity: 1;
    }

    // 리사이즈 핸들 스타일
    .resize-handle {
      position: absolute;
      right: -20px; // 데이터 컬럼 핸들 위치
      top: 0;
      bottom: 0;
      width: 8px;
      cursor: col-resize;
      background: transparent;
      z-index: 10;

      &::before {
        content: '';
        position: absolute;
        right: 3px; // 핸들 중앙에 선 위치
        top: 0;
        bottom: 0;
        width: 2px;
        background: transparent;
        transition: background-color 0.2s ease;
      }

      &:hover {
        background: rgba(27, 117, 187, 0.1);
      }

      &:active {
        background: rgba(27, 117, 187, 0.2);
      }
    }
  }

  :deep(.checkbox-header) {
    .resize-handle {
      right: -12px !important; // 체크박스 컬럼 핸들 위치
    }
  }

  :deep(tr.v-data-table__tr) {
    &:hover {
      > td {
        background-color: rgba(27, 117, 187, 0.1);
      }
    }
  }

  :deep(td.v-data-table__td) {
    --v-border-color: 0, 0, 0;
    --v-table-row-height: 42px;
    font-size: toRem(14);
    font-weight: 400;
    overflow: hidden; // 셀 자체에서 오버플로우 숨김
    border-right: 1px solid #e0e0e0 !important; // 세로선 강제 적용

    &:last-child {
      border-right: none !important; // 마지막 셀은 세로선 제거
    }

    // 모든 셀 내용에 대한 기본 텍스트 처리
    > * {
      width: 100%;
      max-width: 100%;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
      box-sizing: border-box;
    }

    .v-selection-control.v-checkbox-btn {
      &.v-selection-control--disabled {
        cursor: not-allowed;
      }
      .v-icon--size-default {
        font-size: 1.3rem;
      }
    }

    .v-chip__content {
      height: inherit;
    }


    // 하이라이트 기본 스타일
    &:has(.s-highlight-default) {
      background-color: $s-default--gray-4;
      color: $s-default--gray-9;
    }

    // 커스텀 하이라이트 클래스들
    &:has(.s-highlight-info) {
      background-color: $s-btn--blue-3;
      color: $s-btn--blue-1;
    }

    &:has(.s-highlight-error) {
      background-color: $s-btn--red-3;
      color: $s-btn--red-1;
    }

    &:has(.s-highlight-success) {
      background-color: $s-btn--green-3;
      color: $s-btn--green-1;
    }
  }

  // tr의 클래스를 기반으로 모든 td에 스타일 적용 (체크박스 셀 포함)
  :deep(tr.s-highlight-default) {
    > td {
      background-color: $s-default--gray-4 !important;
      color: $s-default--gray-9;
    }
  }

  :deep(tr.s-highlight-info) {
    > td {
      background-color: $s-btn--blue-3 !important;
      color: $s-btn--blue-1;
    }
  }

  :deep(tr.s-highlight-error) {
    > td {
      background-color: $s-btn--red-3 !important;
      color: $s-btn--red-1;
    }
  }

  :deep(tr.s-highlight-success) {
    > td {
      background-color: $s-btn--green-3 !important;
      color: $s-btn--green-1;
    }
  }

  .status-chip {
    color: white;
    font-weight: 300;
  }

  .no-data {
    color: #ccc;
  }

  .s-data-table-column__text {
    width: inherit;
  }

  // 말줄임 관련 클래스들
  .s-ellipsis {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    max-width: 100% !important;
  }

  .s-ellipsis--off {
    overflow: visible !important;
    text-overflow: initial !important;
    white-space: normal !important;
    max-width: none !important;
    -webkit-line-clamp: none !important;
    line-clamp: none !important;
    -webkit-box-orient: initial !important;
    display: initial !important;
  }

  .s-ellipsis--multi-2 {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .s-ellipsis--multi-3 {
    display: -webkit-box !important;
    -webkit-line-clamp: 3 !important;
    line-clamp: 3 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .s-table-column__text {
    display: inline-block;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;

    // Vuetify의 text-truncate 클래스와 함께 사용될 때
    &.text-truncate {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    // 기본적으로 말줄임 적용
    &.s-ellipsis {
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      white-space: nowrap !important;
      max-width: 100% !important;
    }

    // 말줄임 비활성화
    &.s-ellipsis--off {
      overflow: visible !important;
      text-overflow: initial !important;
      white-space: normal !important;
      max-width: none !important;
    }
  }

  &.hide-footer {
    > :deep(.v-data-table-footer) {
      display: none !important;
    }
  }
  :deep(.v-btn:hover) > .v-btn__overlay {
    opacity: 0.1;
  }

  :deep(.v-btn--disabled.v-btn--variant-flat) .v-btn__overlay {
    opacity: 1;
    background: transparent;
  }

  .s-data-table-pagination {
    position: relative;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #333;
    margin-top: 60px;

    :deep(.v-pagination__item--is-active) {
      color: white;

      .v-btn--disabled {
        color: white;

        &.v-btn--variant-flat .v-btn__content {
          font-size: 12px;
          font-weight: 700;
          color: #fff;
        }
      }
    }
  }

  &.fixed-table :deep(table) {
    table-layout: fixed;

    tbody .v-data-table__td {
      > * {
        width: 100%;
        max-width: 100%;
        display: inline-block;
        word-break: break-word;
        white-space: normal;
        overflow-wrap: break-word;
      }

      // 말줄임표 처리를 위한 스타일
      .s-table-column__text {
        width: 100%;
        max-width: 100%;
        display: inline-block;
        box-sizing: border-box;

        &.text-truncate {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
      }

      &:has(span + i) {
        span {
          max-width: calc(100% - 30px);
        }
      }
    }
  }

  .right-move {
    position: absolute;
    right: 0;
  }

  :deep(.v-table__wrapper) {
    border-top:solid 1px #000;
    border-bottom:solid 1px #ddd;
    overflow-x: hidden; // 초기에는 스크롤 숨김 (컨테이너에 맞게 조정)
    width: 100%;

    > table {
      table-layout: auto; // 초기에는 자동 레이아웃으로 화면에 맞게 확장
      width: 100%; // 컨테이너 전체 너비 사용
      max-width: 100%; // 컨테이너를 넘지 않도록 제한

      // 컬럼 너비 변경 시 깜박임 방지
      th, td {
        transition: none !important;
      }
    }

    // 리사이징 모드일 때만 fixed 레이아웃 사용
    &.table-resizing > table {
      table-layout: fixed;
      width: auto;

      // 컬럼 너비를 CSS 변수에서 가져오도록 설정 (깜빡임 방지)
      @for $i from 0 through 20 { // 최대 21개 컬럼 지원 (0-indexed)
        th:nth-child(#{$i + 1}),
        td:nth-child(#{$i + 1}) {
          width: var(--column-#{$i}-width) !important;
          min-width: var(--column-#{$i}-width) !important;
          max-width: var(--column-#{$i}-width) !important;
          box-sizing: border-box;
        }
      }
    }
  }

    .material-icons{
      color:#191919;
      font-size:14px;
      position: relative;
      top:-1px;
    }

    > table > tbody > tr > td,
    > table > tbody > tr > th,
    > table > thead > tr > td,
    > table > thead > tr > th,
    > table > tfoot > tr > td,
    > table > tfoot > tr > th {
      padding: 0 20px;
      border-right: 1px solid #e0e0e0 !important; // 세로선 강제 적용
      box-sizing: border-box; // 패딩과 보더를 포함한 정확한 너비 계산

      // 리사이즈 중 안정적인 너비 유지
      overflow: hidden;
      word-wrap: break-word;

      &:last-child {
        border-right: none !important; // 마지막 셀은 세로선 제거
      }
    }

    > table > thead > tr > th {
      background: #F7F9FA;
      text-transform: capitalize;
    }

    tbody tr:not(:last-child) > td,
    tbody tr:not(:last-child) > th {
      border-bottom: thin solid rgba(var(--v-border-color), var(--v-border-opacity));
    }

    tfoot tr > td {
      font-weight: 600;
    }
  }

// resizable이 false일 때 세로선 숨기기 및 가로 스크롤 허용
.s-data-table.no-vertical-lines {
  :deep(th.v-data-table__th) {
    border-right: none !important;
  }

  :deep(td.v-data-table__td) {
    border-right: none !important;
  }

  .header-cell {
    &.justify-start {
      justify-content: flex-start !important;
    }

    &.justify-center {
      justify-content: center !important;
    }

    &.justify-end {
      justify-content: flex-end !important;
    }
  }

  > table > tbody > tr > td,
  > table > tbody > tr > th,
  > table > thead > tr > td,
  > table > thead > tr > th,
  > table > tfoot > tr > td,
  > table > tfoot > tr > th {
    border-right: none !important;
  }

  // resizable이 false일 때만 가로 스크롤 허용 및 고정 너비 적용
  :deep(.v-table__wrapper) {
    overflow-x: auto !important;

    > table {
      table-layout: fixed !important; // 고정 레이아웃으로 변경하여 너비 안정성 확보
      width: max-content !important;
      min-width: 100% !important;
      max-width: none !important;
    }
  }

  // 각 컬럼별로 개별 너비 적용
  :deep(table) {
    @for $i from 1 through 20 { // 최대 20개 컬럼까지 지원
      th:nth-child(#{$i}),
      td:nth-child(#{$i}) {
        width: var(--column-#{$i - 1}-width, var(--column-width, 45px)) !important;
        min-width: var(--column-#{$i - 1}-width, var(--column-width, 45px)) !important;
        max-width: var(--column-#{$i - 1}-width, var(--column-width, 45px)) !important;
      }
    }
  }

  // 데이터 셀에 텍스트 오버플로우 처리
  :deep(td.v-data-table__td) {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
}

.s-data-table-pagination {
  :deep(.v-pagination__item.v-pagination__item--is-active) {
    .v-btn__overlay {
      opacity: 0;
    }

    .v-btn__content {
      font-weight: 600;
    }

  }

  :deep(.v-pagination__item) {
    .v-btn__content {
      font-weight: 400;
    }
  }

}

.v-table.v-table--fixed-header>.v-table__wrapper>table>thead>tr>th {
  background-color: $s-default--gray-1 !important;
}

.v-table {
  :deep(.v-table__wrapper) {
    .v-selection-control--density-default {
      --v-selection-control-size: 30px;
    }
  }
}
